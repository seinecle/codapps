= CODAPPS: Designing the layout of the app
Clément Levallois <levallois@em-lyon.com>
last modified: {docdate}
:icons: font
:iconsfont: font-awesome
:source-highlighter: rouge
:revnumber: 1.0
:docinfo: shared
:example-caption!:
ifndef::imagesdir[:imagesdir: ../../images]
ifndef::sourcedir[:sourcedir: ../../../../main/java]


:title-logo-image: EMLyon_logo_corp.png[width="242" align="center"]

image::EMLyon_logo_corp.png[width="242" align="center"]

//ST: 'Escape' or 'o' to see all sides, F11 for full screen, 's' for speaker notes

[WARNING]
====
you must have worked and understood the content of Module 5 about *coding* before you can follow this lesson.
====

== 1. Create a new project
//ST: 1. Create a new project

//ST: !
Take the same steps as in https://emlyon.github.io/codapps/generated-html/creating-your-first-project-and-previewing-your-app.html[this lesson in Module 1].


== 1. Creating the main screen of the app
//ST: 1. Creating the main screen of the app

//ST: !
The main action of the game takes place on a single screen:

//ST: !
image::https://docs.google.com/drawings/d/e/2PACX-1vSpaX0J6mxUin41q_xdsOowZVBrCor3OWVZK3RRWBbhOH9su5SX-IOddZe5qwknDkJV51T1ZHPWh5Jn/pub?w=1440&h=1080[align="center",title="The design of the cookie clicker mobile app"]

//ST: !
So the first step is to create this screen. *We will not use the GUI Builder for this* (contrary to previous lessons) as it is too slow and unpractical for a complex app like this one.

//ST: !
=== a. Create a Form with by coding (not with the GUI Builder!)

//ST: !
Follow these steps:

//ST: !
image::https://docs.google.com/drawings/d/e/2PACX-1vTuNrLtlj5yTwMcnPAWXFlCRxvTEIXnVizlyrdUELHwwXpmc0_TlAMyd2Hs5FVYpmL0dRHikFjnR2aL/pub?w=1440&h=1080[align="center", title="Creating a Form with code"]

//ST: !
In the window which opens, *leave every parameter unchanged* except for the name of the screen:

//ST: !
image::https://docs.google.com/drawings/d/e/2PACX-1vQiBe23XGx1GXYt_TUxOr_yVAS9FxecSfPjFIQ3bI45k5Jima-zQJ2gVk8qM29RPElw4tfSyKkAdFBy/pub?w=1440&h=1080[align="center", title="Choosing the name of your Form"]

//ST: !
This creates a file name `Form1.java` (if you chose Form1 as a name).

If you remember the lesson on `methods and classes` in Module 5, you should realize we just created a `class`.

The role of classes is to organize the code in different files and subunits, for a cleaner style of coding.

//ST: !
At the moment the class is almost empty:

//ST: !
image::form-empty.png[align="center",title="The form has been created and is almost empty"]

//ST: !
In this class, *write or copy paste* 2 lines of code, so that the entire file looks like:

//ST: !
[[constructor]]
.Creating a function which runs when the Form is instantiated
[source,java]
----
package net.clementlevallois.net.cookieclicker.ultimate; // <1>

public class Form1 {

    public Form1() {  // <2>
    } // <3>

} // <3>
----
<1> of course your package name will be different
<2> the function should have the same name as your class: Form1 in this case.
<3> Don't forget that there are two `}` to close at the end!

//ST: !
[[constructor-extract-1]]
.What are these two lines we added
[source,java]
----
    public Form1() {  // <1>

    } // <1>
----
<1> anything we write between these 2 curly braces *will be executed when `Form1` is instantiated*.

//ST: !
So this is a special method: when the class is instantiated, it will run (just once).

Another way to say it is: "when the objet `Form1` is built, this method defines how it is constructed." For this reason it is called a `constructor`.

//ST: !
Next, let's add our first variable:

//ST: !
[[constructor]]
.Creating a function which runs when the Form is instantiated
[source,java]
----
package net.clementlevallois.net.cookieclicker.ultimate; // <1>

public class Form1 {
    Resources theme;  // <1>

    public Form1() {
    }

}
----
<1> our first variable! It is an object useful to access the pics we need in the app. We'll use it later

//ST: !
You should have the same error signal as this one image:error-lightbulb.png[]:

image::resources-error-import.png[align="center",title="Error when creating a variable of type Resources"]

//ST: !
Follow the steps to fix the error:

//ST: !
image::https://docs.google.com/drawings/d/e/2PACX-1vQTk005CICOS0uvYOFPtlL1EylehQJMWXpqvDKwwCOdgz4mscinbdQC-0uRAmePdrBR7HAEt8Ua13EQ/pub?w=1232&h=822[align="center",title="Importing the type"]

//ST: !
The result is a new line added on top: see line 3 here:

image::import-result.png[align="center",title="a line telling where the type is coming from"]

//ST: !
What you did is simple:

- you created a variable of type `Resources`, but this type is not included in the basic package of Java (which just includes `String`, `Integer`, etc.)
- We must tell Java *where to find it so that it can import it*:
- we chose `import com.codename1.ui.util.Resources` because the type `Resources` comes from Codename One, indeed.

Finally, let's add a last element:

//ST: !
[[extend]]
.Adding an info that our class extends another class
[source,java]
----
package net.clementlevallois.net.cookieclicker.ultimate;

import com.codename1.ui.util.Resources;

public class Form1 extends com.codename1.ui.Form {  // <1>
    Resources theme;

    public Form1() {
    }

}
----
<1> we added `extends com.codename1.ui.Form` before the `{`

//ST: !
What does it mean? We just said that the class we created (`Form1`) *extends* another class, named  `com.codename1.ui.Form`

-> our class `Form1` just inherited of all the methods of the class `Form`!
-> *inherited* means that whatever a `Form` is capable of doing (having Labels in it, be in a BorderLayout or GridLayout, have a title, a background color, etc.), *our class `Form1` inherited these powers and so, it can do it as well!*


//ST: !
With all this setup done, we can work on the layout we want for our screen.

//ST: !
=== b. Creating the layout of the Form

//ST: !
I mentioned that anything written here would be executed when the Form is instantiated:

//ST: !
[[constructor-extract-1]]
.The constructor of the class Form1
[source,java]
----
    public Form1() {  // <1>

    } // <1>
----
<1> this method will be executed when `Form1` is instantiated

//ST: !
So we are going to write our layouts there, so that they get into place right when the Form gets created.

I suggest we organize the screen in three big regions:

//ST: !
image::https://docs.google.com/drawings/d/e/2PACX-1vRdJ1LtlR9EorsUzgLEanAEc9YqoCc3-NMAC5SibIx9XywuMeFoGepoERYJ27pbt3eT4eARQw4tgW4z/pub?w=1440&h=1080[align="center",title="The organization of the screen in 3 regions"]

//ST: !
*Putting the Form in a BorderLayout* (see https://emlyon.github.io/codapps/generated-html/using-layouts.html#_6_the_border_layout[the lesson on the BorderLayout]) will help us divide the screen in these three regions. GridLayout might be another option.

The idea is to have something like this:

//ST: !
image::https://docs.google.com/drawings/d/e/2PACX-1vSnRa01f4DS3224901xXbx1vSrWq3UhUVTjlaiIy9ADgc4WJOlxWIQir89wcauGe1CdAU4seW_5odKs/pub?w=1440&h=1080[align="center",title="The organization of the screen in 3 regions"]

//ST: !
Let's define all of this for our Form, with some code:

//ST: !
[[defining-layouts]]
.Start by creating layouts
[source,java]
----
// these lines of code should go inside  public Form1() { }

//we create the different layouts we will need in this Form:
BorderLayout borderLayout = new BorderLayout();
BoxLayout boxYLayout = BoxLayout.y(); //<1>
BoxLayout boxXLayout = BoxLayout.x(); //<1>
----
<1> weird looking code: what is `BoxLayout.y()` and `BoxLayout.x()`? These are https://emlyon.github.io/codapps/generated-html/classes-and-methods.html#_c_but_not_always_static_methods[static methods], used in a fancy way to do the equivalent of `new BoxLayout()`

//ST: !
[[put-form-to-border-layout]]
.Choose a BorderLayout for the Form
[source,java]
----
// these lines of code should go inside  public Form1() { }

this.setLayout(borderLayout); // <1>
----
<1> the Form is the file where this code is being written, so we can name it with the keyword `this`. The Form has a method `setLayout` which we can use to switch the Form to a BorderLayout.


//ST: !
We now have a Form, set in a BorderLayout.
We must put many things in each of the North, Center and South region of the layout.

*To organize things, we'll add a container for each region, and our Components will go inside these containers*:

//ST: !
image::https://docs.google.com/drawings/d/e/2PACX-1vRPFD4NT_CRnV-LR-cUs59PXu_fjYNsMBtVm37pOs1zNFJacjKYfD0gFFeNlxBRUDJs2dXmqsqaJjP8/pub?w=1440&h=1080[align="center",title="Adding 3 containers - one for each region of the Form"]

//ST: !
[[adding-container-north]
.Adding a container to the North region of the Form
[source,java]
----
// these lines of code should go inside  public Form1() { }

//we create a Container that will contain everything in the "North" part of the BorderLayout:
Container northRegion = new Container();

//we choose a BoxY Layout for this container:
northRegion.setLayout(boxYLayout);
----

//ST: !
[[adding-container-center]]
.Adding a container to the Center region of the Form
[source,java]
----
// these lines of code should go inside  public Form1() { }

//we create a Container that will contain everything in the "Center" part of the BorderLayout:
Container centerRegion = new Container();

//we put this center region in a Box X Layout:
centerRegion.setLayout(boxXLayout);
----


//ST: !
[[adding-container-south]]
.Adding a container to the South region of the Form
[source,java]
----
// these lines of code should go inside  public Form1() { }

//we create a Container that will contain everything in the "South" part of the BorderLayout:
Container southRegion = new Container();

//we put this container in the south region in a BoxX Layout:
southRegion.setLayout(boxXLayout);
----

//ST: !
We created several containers, *but it doesn't mean they are in our Form yet*. We need to add them, and tell where they should go:

//ST: !
[[adding-containers-to-the-form]]
.Adding the containers to the Form
[source,java]
----
// these lines of code should go inside  public Form1() { }
this.addComponent(BorderLayout.NORTH, northRegion);
this.addComponent(BorderLayout.SOUTH, southRegion);
this.addComponent(BorderLayout.CENTER, centerRegion);
----




== The end
//ST: The end

//ST: !
Questions? Want to open a discussion on this lesson? Visit the forum https://github.com/seinecle/codapps/issues[here] (need a free Github account).

//ST: !
Find references for this lesson, and other lessons, https://seinecle.github.io/codapps/[here].

//ST: !
Licence: Creative Commons, https://creativecommons.org/licenses/by/4.0/legalcode[Attribution 4.0 International] (CC BY 4.0).
You are free to:

- copy and redistribute the material in any medium or format
- Adapt — remix, transform, and build upon the material

=> for any purpose, even commercially.

//ST: !
image:round_portrait_mini_150.png[align="center", role="right"]
This course is designed by Clement Levallois.

Discover my other courses in data / tech for business: http://www.clementlevallois.net

Or get in touch via Twitter: https://www.twitter.com/seinecle[@seinecle]
